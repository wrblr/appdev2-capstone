<nav class="navbar navbar-light bg-light">
  <div class="container">
    <div class="row w-100">
      <div class="col-lg-10 offset-lg-1 d-flex justify-content-between align-items-center">
        <!-- Brand -->
        <a class="navbar-brand d-flex align-items-center" href="/">
          <span class="fs-4 fw-bold" style="font-family: 'Cinzel Decorative', serif;">WARBLE</span>
        </a>

        <!-- Middle section with language selector -->
        <div class="d-flex flex-grow-1 mx-4">
          <%= form_with url: user_registration_path, method: :patch, local: true, id: "navbar_language_form", class: "w-100" do |f| %>
            <%= f.label :preferred_language_id, "Select language", class: "visually-hidden", style: "font-family: 'Cinzel Decorative', serif;" %>
            <%= f.select :preferred_language_id,
            Language.all.map { |lang| [lang.name, lang.id] },
            { selected: current_user&.preferred_language_id },
            { class: "form-select w-100", id: "navbar_preferred_language", onchange: "this.form.submit()", style: "font-family: 'Cinzel Decorative', serif;" } %>
          <% end %>

        </div>

        <!-- Profile link (icon only on mobile, icon+text on larger screens) -->
        <% if current_user %>
          <div class="dropdown">
            <a class="d-flex align-items-center text-decoration-none text-secondary dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-regular fa-user me-1"></i>
              <span class="d-none d-md-inline" style="font-family: 'Cinzel Decorative', serif;">Profile</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown" style="font-family: 'Cinzel Decorative', serif;">
              <li>
                <%= link_to "Edit Profile", edit_user_registration_path, class: "dropdown-item", style: "font-family: 'Cinzel Decorative', serif;" %>
              </li>
              <li>
                <%= link_to "Sign Out", destroy_user_session_path, method: :delete, data: { turbo_confirm: "Are you sure you want to sign out?" }, class: "dropdown-item text-danger", style: "font-family: 'Cinzel Decorative', serif;" %>
              </li>
            </ul>
          </div>
        <% end %>

      </div>
    </div>
  </div>
</nav>
