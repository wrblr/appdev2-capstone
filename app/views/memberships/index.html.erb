<% content_for :title, "Memberships" %>

<%# Flash messages %>
<% flash.each do |type, message| %>
  <% bootstrap_class = case type.to_sym
    when :notice then "success"
    when :alert then "danger"
    else type
  end %>
  <div class="alert alert-<%= bootstrap_class %> alert-dismissible fade show" role="alert">
    <%= message %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% end %>

<h1 class="text-center mb-5 mt-5 fw-bold" style="font-family: 'Cinzel Decorative', serif;">Your Group Memberships:</h1>

<div class="text-center mt-5 mb-5">
  <%= link_to "Join a New Group", new_membership_path, class: "btn btn-primary px-4 py-2" %>
</div>

<% if @memberships.any? %>
  <div class="d-flex flex-wrap justify-content-center gap-4">
    <% @memberships.each do |membership| %>
      <% group = membership.group %>
      <div class="text-center">
        <%= link_to group_path(group), class: "text-decoration-none" do %>
          <div class="rounded-circle d-flex align-items-center justify-content-center bg-primary text-white shadow"
            style="width: 120px; height: 120px; font-size: 1.25rem; font-weight: bold; font-family: 'Cinzel Decorative', serif;">
            <%= group.name&.first&.upcase || "?" %>
          </div>
        <% end %>
        <p class="mt-2 fw-bold" style="font-family: 'Cinzel Decorative', serif;"><%= group.name %></p>

        <%= button_to "Leave Group", membership_path(membership),
              method: :delete,
              data: { confirm: "Are you sure you want to leave #{group.name}?" },
              class: "btn btn-outline-danger btn-sm mt-2" %>
      </div>
    <% end %>
  </div>
<% else %>
  <p class="text-center text-muted mt-4">No group memberships found.</p>
<% end %>
